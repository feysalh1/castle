<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Children's Castle{% endblock %}</title>
    
    <!-- Set Firebase configuration in window object for use by external JS files -->
    <script>
        // Assign Firebase configuration to window for access by imported modules
        window.FIREBASE_API_KEY = "{{ firebase_api_key }}";
        window.FIREBASE_PROJECT_ID = "{{ firebase_project_id }}";
        window.FIREBASE_AUTH_DOMAIN = "{{ firebase_auth_domain }}";
        window.FIREBASE_STORAGE_BUCKET = "{{ firebase_storage_bucket }}";
        window.FIREBASE_MESSAGING_SENDER_ID = "{{ firebase_messaging_sender_id }}";
        window.FIREBASE_APP_ID = "{{ firebase_app_id }}";
        window.FIREBASE_MEASUREMENT_ID = "{{ firebase_measurement_id }}";
    </script>
    
    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "{{ firebase_api_key }}",
            authDomain: "{{ firebase_auth_domain }}",
            projectId: "{{ firebase_project_id }}",
            storageBucket: "{{ firebase_storage_bucket }}",
            messagingSenderId: "{{ firebase_messaging_sender_id }}",
            appId: "{{ firebase_app_id }}",
            measurementId: "{{ firebase_measurement_id }}"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        
        // Make Firebase available globally
        window.firebaseApp = app;
    </script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block additional_css %}{% endblock %}
</head>
<body>
    <div class="content">
        {% block content %}{% endblock %}
    </div>
    
    <!-- Custom JS -->
    {% block scripts %}{% endblock %}
</body>
</html>